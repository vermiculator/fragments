---
import { ScrollArea } from './ui/scroll-area';

import ChildLinks from './ChildLinks.astro';
import ParentLinks from './ParentLinks.astro';
import PeerLinks from './PeerLinks.astro';


---

<nav class="navbar-pane print:hidden" aria-label={Astro.locals.t('sidebarNav.accessibleLabel')}>
	<div class="navbar-content">
		<div class="navbar-panel  navbar-side sl-flex">
			<ParentLinks />
		</div>
		<div class="navbar-panel sl-flex">
			<ScrollArea className="p-0.5 max-h-50 w-auto">
				<PeerLinks />
			</ScrollArea>
		</div>
		<div class="navbar-panel navbar-side sl-flex">
			<ChildLinks />
		</div>
	</div>
</nav>

<style>
	:root {

		.navbar-pane {
			position: fixed;
			z-index: 1000;
			inset-block-end: 0;
			left: 0;
			right: 0;
			width: 100%;
			max-height: 35vh;
			height: auto;
			background-color: transparent;
			overflow-y: auto;
			pointer-events: none;
		}

		.earth-wrapper .navbar-pane, .library-wrapper .navbar-pane {
			background-color: var(--sl-color-bg-nav);
			border-top: 1px solid var(--sl-color-hairline-shade);
			pointer-events: auto;
		}

		.navbar-content {
			display: grid;
			position: static;
			grid-template-columns: 22vw 1fr 22vw;
			align-items: start;
			width: 100%;
			padding: 0.5rem;
			gap: 0.7rem;
		}

		.navbar-panel {
			display: flex;
			align-items: center;
		}

		.navbar-content .navbar-panel:nth-child(2) {
			justify-self: center;
			text-align: center;
			align-self: center;
			padding-top: 1rem;
		}

		.navbar-panel.navbar-side {
			width: 22vw;
			max-width: 22vw;
			flex-direction: column;
			align-items: flex-start;
			justify-content: flex-start;
			gap: 0.3rem;
			pointer-events: auto;
		}

		.navbar-panel.navbar-side:first-child {
			pointer-events: auto;
			padding: 0.8rem var(--left-sidebar-pad-x);
			box-sizing: border-box;
		}

		.navbar-panel.navbar-side:first-child .sl-link-card,
		.navbar-panel.navbar-side:first-child .sl-link-card .title {
			text-align: left;
		}

		.navbar-panel:not(.navbar-side) {
			width: 100%;
		}
		.navbar-panel:not(.navbar-side) > * {
			width: 100%;
		}

		.navbar-panel.navbar-side .sl-container,
		.navbar-panel.navbar-side .text-sm,
		.navbar-panel.navbar-side > div {
			width: 100%;
		}

		.navbar-panel.navbar-side .sl-link-card + .sl-link-card {
			margin-top: 0.5rem;
		}

		.navbar-content h2 {
			font-size: var(--sl-text-m);
			text-decoration: none;
		}

		.navbar-content .sl-link-card {
			overflow-wrap: anywhere;
			padding: 0.4rem;
			border-radius: 0.4rem;
			width: 100%;
			min-width: 100%;
			box-sizing: border-box;
		}

		.navbar-panel.navbar-side .sl-link-card {
			width: 100%;
			min-width: 100%;
		}

		.navbar-panel.navbar-side .sl-link-card a {
			display: block;
			width: 100%;
			box-sizing: border-box;
		}

		.navbar-content .sl-link-card .title {
			font-size: var(--sl-text-xs);
			text-decoration: none;
			color: var(--sl-color-gray-3);
		}

		.navbar-content .sl-link-card span {
			vertical-align: center;
		}

	}
</style>
