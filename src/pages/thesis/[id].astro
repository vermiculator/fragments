---

import type { CollectionEntry } from 'astro:content';
import { getCollection, render} from "astro:content";
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { ScrollArea } from "../../components/ui/scroll-area";

interface Props {
	page: CollectionEntry<'thesis'>;
}

export async function getStaticPaths() {
  const pages = await getCollection('thesis');
  console.log('Available thesis pages:', pages.map(p => p.id));
  return pages.map(page => ({
    params: { id: page.id.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '') },
    props: { page },
  }));
}

const { page } = Astro.props;

if (!page) {
  return Astro.redirect('/404');
}

const { Content } = await render(page);
export const prerender = true;

---

  <StarlightPage frontmatter={{ title: page.data.title, tableOfContents: true, template: 'doc', graph: {visible: false} }}>
    <ScrollArea className="body p-1 max-h-1/2">
        <Content />
    </ScrollArea>
  </StarlightPage>

<style>
    :root{
        div.content-panel:nth-child(1){
            display: none;
        }

        .level-h1 {
            color: var(--color-accent-600);
        }
    }

</style>