---
import { getCollection } from 'astro:content';
import Layout from '../../components/Layout.astro';

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/404');
}

const allEntries = await getCollection('library');
const entry = allEntries.find(e => e.id === slug);

if (!entry || !entry.rendered) {
  return Astro.redirect('/404');
}

const Content = entry.rendered.Content;
---

<Layout pageTitle={entry.data.title} pageStyle="library">
  <Content />
</Layout>
