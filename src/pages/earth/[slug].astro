---
import { getCollection } from 'astro:content';
import Layout from '../../components/Layout.astro';

export const prerender = false;

const { slug } = Astro.params;

if (!slug) {
  return Astro.redirect('/404');
}

const allEntries = await getCollection('earth');
const entry = allEntries.find(e => e.id === slug);

if (!entry) {
  return Astro.redirect('/404');
}

// Glob loader provides rendered content
const { Content } = await entry.render();
---

<Layout pageTitle={entry.data.title} pageStyle="earth">
  <Content />
</Layout>
